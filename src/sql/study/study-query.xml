<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM
"http://java.sun.com/dtd/properties.dtd">
<properties>
	<entry key="selectStudyList">
		SELECT
		  S_NO
		, S_NAME
		, S_TO
		, S_DAY
		, S_STARTPERIOD
		, S_ENDPERIOD
		, S_STARTTIME
		, S_ENDTIME
		, S_EXPLAIN
		, S_NOTICE
		, CNAME
		, NICKNAME
		, FILE_PATH
		, CHANGE_NAME
		FROM STUDY
		JOIN CATEGORY USING(CID)
		JOIN MEMBER USING(USER_NO)
		JOIN ATTACHMENT USING(S_NO)
		WHERE S_STATUS = 'Y'
		ORDER BY S_NO DESC
	</entry>
	
	<entry key="selectStudyMemberList">
		SELECT
				S_NO,
				COUNT(*) "s_memberCount"
		   FROM STUDY
		   JOIN MEMBER_JOINSTUDY USING (S_NO) 
           WHERE S_STATUS = 'Y'
           GROUP BY S_NO
	</entry>
	
	<entry key="insertStudyRoom">
	INSERT 
	INTO STUDY
	(
		S_NO
	  , S_NAME
	  , S_TO
	  , S_DAY
	  , S_STARTPERIOD
	  , S_ENDPERIOD
	  , S_STARTTIME
	  , S_ENDTIME
	  , S_EXPLAIN
	  , S_NOTICE
	  , S_STATUS
	  , USER_NO
	  , CID
	)
	VALUES
	(
		SEQ_SNO.NEXTVAL
	  , ?
	  , ?
	  , ?
	  , ?
	  , ?
	  , ?
	  , ?
	  , ?
	  , ?
	  , DEFAULT
	  , ?
	  , ?
	)
	</entry>
	<entry key="insertStudyPhoto">
	INSERT
	INTO ATTACHMENT
	(
			FILE_NO
		  , BOARD_NO
		  , NOTICE_NO	
		  , S_NO
		  , ORIGIN_NAME
		  , CHANGE_NAME
		  , FILE_PATH
		  , UPLOAD_DATE
		  , STATUS
	)
	VALUES
	(
			SEQ_ANO.NEXTVAL
		  , SEQ_SNO.CURRVAL
		  , SEQ_SNO.CURRVAL
		  , SEQ_SNO.CURRVAL
		  , ?
		  , ?
		  , ?
		  , SYSDATE
		  , DEFAULT
	)
	</entry>
	<entry key="selectStudyRoom">
	SELECT
		  S_NO
		, S_NAME
		, S_TO
		, S_DAY
		, S_STARTPERIOD
		, S_ENDPERIOD
		, S_STARTTIME
		, S_ENDTIME
		, S_EXPLAIN
		, S_NOTICE
		, CNAME
		, NICKNAME
		FROM STUDY
		JOIN CATEGORY USING(CID)
		JOIN MEMBER USING(USER_NO)
		JOIN ATTACHMENT USING(S_NO)
		WHERE S_STATUS = 'Y'
          AND S_NO = ?
	</entry>
	
	<entry key="deleteStudy">
	UPDATE STUDY
	   SET S_STATUS = 'N'
	 WHERE S_NO = ?
	</entry>
	
	<entry key="selectStudyListNumber">
		SELECT
				COUNT(*)
		   FROM STUDY
		  WHERE S_STATUS ='Y'
	</entry>
	<entry key="insertMemberJoinStudy">
		INSERT 
		INTO MEMBER_JOINSTUDY
		(
				USER_NO
			  , S_NO
		)
		VALUES
		(
				?
			  , ?
		)
	</entry>
	<entry key="selectMemberJoinStudy">
		SELECT
				USER_NO
			  , S_NO
		   FROM MEMBER_JOINSTUDY
		  WHERE USER_NO=?
		    AND S_NO=? 
	</entry>
	<entry key="memberJoinStudyNum">
		SELECT
				COUNT(*)
		   FROM MEMBER_JOINSTUDY
		  WHERE USER_NO=? 
	</entry>
	<entry key="StudyMemberCount">
		SELECT
				COUNT(*)
		   FROM MEMBER_JOINSTUDY
		  WHERE S_NO=? 
	</entry>
	<entry key="selectMyStudy">
      SELECT
             S.S_NO
           , S_NAME
           , S_TO
           , CNAME
        FROM STUDY S
        JOIN MEMBER_JOINSTUDY M ON(S.S_NO = M.S_NO)
        JOIN CATEGORY USING(CID)
        WHERE S_STATUS = 'Y'
           AND M.USER_NO = ?    
   </entry>
	
	
	
	
	
</properties>








